Состав комплекса
================

Определения и согращения
ПО - программное обеспечение

Комплекс состоит из серверов выполняющих функции:

1. базы данных;
2. сервера приложений;
3. sip-сервера;
4. веб-сервера.

В качестве операционной системы на серверах используется "CentOS 7 x64" с установленным программым обеспечением реализующим требуемую функцию. Все сервера настроены на работу на базе IPv6 сети. Для случаев где необходимо обеспечить применение IPv4 адресов, это оговаривается отдельно. Если не сказано отдельно, то везде используется продукты с открытым исходным кодом. Каждый из типов серверов представлен двумя виртуальными машинами. Перечень виртуальных машин представлен в таблице ниже.

.. table:: Перечень виртуальных машин

  =====================   =====================  =========================
  Наименование сервера    DNS имя                IPv6 адрес             
  =====================   =====================  =========================
  база данных, сервер 1   couch1.db.rcsnet.ru    fd75:9fac:a7b1:92:6c::901
  база данных, сервер 2   couch2.db.rcsnet.ru1   fd75:9fac:a7b1:92:6c::902
  сервер приложений 1     kazoo1.app.rcsnet.ru   fd75:9fac:a7b1:92:6c::801
  сервер приложений 2     kazoo2.app.rcsnet.ru   fd75:9fac:a7b1:92:6c::802
  sip-сервер 1            fs1.voip.rcsnet.ru     fd75:9fac:a7b1:92:6c::601
  sip-сервер 2            fs1.voip.rcsnet.ru     fd75:9fac:a7b1:92:6c::601
  веб-сервер 1            nginx1.http.rcsnet.ru  fd75:9fac:a7b1:92:6c::601
  веб-сервер 2            nginx2.http.rcsnet.ru  fd75:9fac:a7b1:92:6c::601
  =====================   =====================  =========================

Более подробное описание каждого типа серверов приведено ниже по тексту.

Базы данных
-----------

В качестве базы данных используется продукт `CouchDB <http://couchdb.apache.org/>`_. Между серверами настроена `репликация данных <https://wiki.apache.org/couchdb/Replication>`_.
Дополнительно на серверах установлено програмное обеспечение `RabbitMQ <https://www.rabbitmq.com/>`_. Данное ПО предназначено для обмена сообщениями между серверами приложений. ПО RabbitMQ акже организованно в `кластер <https://www.rabbitmq.com/clustering.html>`_. 




DDDD


Вирутальные машины базы данных, sip-сервера и веб-сервера организованны в кластера высокой доступности на базе технологии "плавающего IP адреса" (shared IP).

dddddd


"Плавающие" IP адреса
-------------------------------

+----------------------+---------------------+--------------------------+-------------+
| Наименование сервера |    DNS имя          |    IPv6 адрес            | IPv4 адрес  |
+======================+=====================+==========================+=============+
| база данных, сервер 1| couch.db.rcsnet.ru  | fd75:9fac:a7b1:92:6c::900|             |
+----------------------+---------------------+--------------------------+-------------+
| sip-сервер           | pbx.rcsnet.ru       |                          |91.103.196.13|
+----------------------+---------------------+--------------------------+-------------+



